----- Section 2 And 3 -----

API = Application Program Interface

Basic Example: Google Search Using Desktop
Interface = Desktop
Program = Search
Application = Google

Complex Example: Create Orders In Sap When You Get Them (No Browser)
Interface = SAP
Program = Create Order
Application = SAP

Web Service
Web = Internet
Service = API
Web Services Are API That Uses Internet.
Every Web Services Are API, But Not All API Are Web Services.

Web Services Use:
XML Or JSON To Format Data Over The Internet.
REST, SOAP Or XML/RPC To Transfer That Data.

                                   ----- Section 4 -----

HTTP = Hyper Text Transfer Protocol
The Request And Response Are Made Of:
1 Start Line
2 Headers
3 Blank Line
4 Body

How It Works:

Start Line Request: HTTP Version(1.1), Method (Get, Post, Put, Delete)
Start Line Response: HTTP Version(1.1), Status Quo (Tells If The Transaction Worked)

Headers Request: Host(Url), Token(Security)
Headers Response: Cookies

Blank Line Just Separates The Headers From The Body.

Body Request: Username, Password, Content
Body Response: What We Requested, Content

*** Start Line ***

Start Line(Request):

Get = Read, Post = Create, Put = Update, Delete = Delete
API Program Folder, Example: Google Search The Folder Is /Search
Parameters: Yes
Format: Method(Blank Space)API Program Folder Location[Optional] + Parameters[Optional](Blank Space)HTTP Version
Example: Get /Search?Q=Tuna HTTP/1.1

Start Line(Response): Status Code (Example: 200 Ok)
Format: HTTP Version + Status Code
Example: HTTP/1.1 200 Ok

Idempotence (Safe To Repeat Over And Over Again)

Get = Yes, Post = No, Put = Yes, Delete = Yes

*** Headers ***
HTTPS://En.Wikipedia.Org/Wiki/List_Of_HTTP_Header_Fields
Authorization: Authorization: Basic Qwxhzgrpbjpvcgvuihnlc2ftzq==
Content-Type: Content-Type: Application/JSON
Date: Date: Tue, 15 Nov 1994 08:12:31 Gmt-3

*** Blank Line ***
Tells Where The Headers Finish And Where The Body Begins.

*** Body ***
Describes The Type, Examples:
Application/JSON
Text/XML

*** Advanced Topics ***

Stateless
HTTP Is Stateless By Default
HTTP Methods: REST And SOAP
REST And SOAP Are Stateless By Default Because They Use HTTP.
REST: Representational State Transfer
SOAP: Simple Object Access Protocol

Stateful
Ftp: File Transfer Protocol

Cookies Are Used By API's To Remember Things.
Cookies Don't Use Passwords, They Use Tokens Instead.

                                   ----- Section 5 -----

*** XML ***

XML = Extensible Markup Language
Header Line: Content-Type: Application/XML
Body: XML
XML Uses Tags <> Just Like HTML, Example: <Button>Click Me!</Button>
Creating A Pizza Order In XML:

<?XML Version="1.0"?>
<Pizza>
        <Size>Small</Size>
        <Toppings>
                <Topping>Onions</Topping>
                <Topping>Tomatoes</Topping>
        </Toppings>
</Pizza>

On XML, It's Going To Condense All The Information Inside The Pizza Tag.

                                ----- Section 6 -----

*** JSON ***

JSON = Javascript Object Notation
Header Line: Content-Type: Application/JSON
Body: JSON
Uses "Key" : "Value"
Example: "Size" : "Small"
Creating A Pizza Order In JSON:

{ "Pizza" : [
        { "Size" : "Small",
          "Toppings" : ["Onions","Mushrooms"]
        },
        { "Size" : "Large",
          "Toppings" : ["Olives","Tomatoes"]
        }
        ]
}

On JSON, It's Going To Condense All The Information Inside Initial Tags.

                                ----- Section 7 -----

SOAP And REST Are Ways To Form HTTP Request And Response.

*** SOAP ***
SOAP = Simple Object Access Protocol
It Has Rules To Form HTTP Request And Response
Uses A Wsdl (Web Services Description Language)

Start Line = Post Wsdl HTTP Version (The Method Is Always Post)
Headers = Content-Type: Text/XML
Blank Line
Body = XML Envelope Formed Using WSDL

Every SOAP API Uses Post.
SOAP Example Uploaded To Github.

                                ----- Section 8 -----

*** REST ***

REST = Representational State Transfer
No Rules
Used To Complete A Web Service (API) Using HTTP

Start Line = All Methods (Post, Get, Put, Delete)
Headers = All
Blank Line
Body = Any (JSON, XML, Images, HTML Web Pages, Etc)

                                ----- Section 9 -----

*** API Access ***

HTTPS: The "S" Stands For Secure, Which Means You Are In An Encrypted Channel.

Authentication = Proving Your Identity
Authorization = Limited Access To Resources

Name               | Authentication  | Authorization | Examples
No Auth            | N               | N             | Google Search Page
Basic Auth         | Y               | N             | Email Account
Bearer Token       | N               | Y             | Not Many
OAuth              | Y               | Y             | Waze App
Two Factor (2FA)   | Y               | N             | High Security

*** Types Of Apps ***

Native = Runs In The OS (Windows, Mac And Linux For Computer. Android And IOS For Mobile.)
The App Must Be Coded In The Same OS As It Is Going To Be Used.
Example: Android Calendar Runs Directly On The Android OS.

Web = The App Runs In The Browser, It Has Limited API's That It Can Use.

Hybrid = It Has Aspects Of Native And Web, The Browser Call's Directly The API/OS
Or It Uses A Middleware Before Reaching The API/OS.

                        Comparison

                | Native        | Hybrid        | Web
Quality         | X             |               |
Speed           | X             |               |
Cost            |               |               | X
Google Play     | X             | X             |
Device Access   | Xx            | X             |

*** Oauth 2.0 ***
HTTPS://Datatracker.Ietf.Org/Doc/HTML/Rfc6749

* Abstract *
OAuth 2.0 Allows A 3rd Party Access
Limited Access (Only Authorized)
To A Web Service (HTTP)
OAuth 1.0 Obsolete

* Introduction *
There Was A Problem Giving Away Credentials To 3rd Party
Oauth Introduces Authorization Layer
Instead Of Credentials, 3rd Party Gets Access Token
Must Use HTTP

* Roles *
Resource Owner
Resource Server
Client/Application
Authorization Server

* Server *
Windows Server Is An Computer Which There Are Servers
Inside It There Are Services
Looking At The Services You Kwow Which Is Running Waiting For Requests (To Serve)
Or It Is Stopped
There's Also The "Backups" Services, Which Run When Others Are Stopped.

* Comms Order *
A - Client Request Auth To Resource Owner
B - Resource Owner Grant Auth To Client
C - Client Send The Auth To Auth Server
D - Auth Server Give The Access Token To Client
E - Client Send The Access Token To Resource Server
F - Resource Server Give Access To The Protected Resource To The Client

* Authorization Grant Types *
Authorization Code - Client Gets Permission Trough A Code From The Resource Server
Implicit - Client Sends The Requisition Directly On The Code
Resource Owner - Someone Who Has Full Permission
Client Credentials - Someone Who Has Already Authorization For That Resource

When An Access Token Has Limited Time, Client Needs To Use The Refresh Token
So It Can Get A New Access Token

                                ----- Section 10 -----

*** Postman ***
With Postman You Can Call An API Without The Need Of An Interface
Example: Send Get Information Request To www.ebay.com And You Receive The API Response.

Status Code Class | Meaning
1xx               | Informational
2xx               | Success
3xx               | Redirected
4xx               | Client Error
5xx               | Server Error

NoAuth Means You Don't Need An Auth To Use The API, It's Public, Everyone Can Access.

BasicAuth Uses A Password And A Username, The Most Common.

DigestAuth Uses A Hashed Digest Auth To Access An Endpoint, It's Formed In The Nounce Request. Can Use Http.

Bearer Token, A Person Who Has A Token Of Access To Determined API. Must Use Https.

OAuth - An App Uses Your Information To Communicate With The Program, The Program Returns The Information And The App Pass It To You. It Uses A Token.

*** PYTHON ***

You can save a file with the .py extension, and run it in Python to do the same work as we do in Postman. Example:

import requests

url = "https://www.googleapis.com/gmail/v1/users/swordfisher32@gmail.com/messages"

querystring = {"access_token":"ya29.Glu7B1XnbYbZts0bWNmKgN9f_gTa_D_gWcXyRUTLt7K1G2r2z2z9Jx3SG8igGJbw"

payload = ""
responde = requests.request("GET", url, data=payload, params=querystring)

print(response.text)

It's going to request the information to the API by the Windows CMD.

                                ----- Section 11 -----

*** CREATING AN API USING AWS ***

API Protocol    | Unsecure          | Secure
HTTP            | HTTP              | HTTPS
Web Socket      | WS                | WSS

VPC = Virtual Private Cloud

On AWS (logged) click on the search bar and type API Gateway, then click 
on Create API (orange button), click on Build REST API, then click on Example API and Create API.

It's going to create the Pet Store API example, for test purposes.

Pet Store Example:
https://62gn60f663.execute-api.us-east-1.amazonaws.com/Test/pets/2

Now do the same steps before to create an API and select New API.

We are going to create a Pizza Restaurant API.

1. Database (DynamoDB - arn:aws:iam::590183987251:role/PizzaRole)
2. Database Role to Access Database (PizzaRole and PizzaPolicy)
3. Lambda (Program) to GET Pizza from Database
4. GET API
5. Lambda (Program) to POST Pizza in Database
6. POST API

1. CREATING THE DATABASE
On AWS, look for RDS on search, click on create database. (relational)
You can also create a NoSQL database with DynamoDB, but it's not common.

We are going to use the DynamoDB here. After DB creation, go to items and create item.

Here you can put new attributes to an item, to make it unique.
On our example we are going to add strings, with id, size and toppings.

2. CREATING ROLES
Search for IAM and click on Roles. Click on create another.
We are using the Lambda program to get order information from the database.
Click on next permission and select the policies: AWSLambdaBasicExecutionRole, click next, put a name and confirm.
After it's creation, click on "add inline policy" to specify what access we need. In that case, we are choosing DynamoDB with read "Getitem" and Write "Putitem", click on "add ARN" and put the ARN previously created, then click next, put name and confirm.

3. CREATING THE PROGRAM WITH LAMBDA
Search for Lambda on AWS and click on Create Function(program).
Click com create a program from scratch, put name, select the Node.js runtime and our PizzaRole from the existing roles, confirm.
Now, we are going to change the code for index.js, like this:

//Bring in the AWS Library
var AWS = require('aws-sdk');

// Create DynamoDB document client
exports.handler = async (event, context) => {
var awsddbdc = new AWS.DynamoDB.DocumentClient({apiVersion: '2012-08-10'});

//Path Parameters
const {id} = event.pathParameters;

//Query Parameters
var params = {
        TableName : 'Pizza',
        Key : {
                id: id
                //id: '1'
        }
};

const data = await awsddbdc.get(params).promise();
const response = {
        statusCode: '200',
        body: JSON.stringify(data.Item)
}

return response;

};

4. CREATING THE GET API
Go to API Gateway again to create a new API with the endpoint type "edge optimized". Now click on create resource put a name and create a path parameter on it.

//Bring in the AWS Library
var AWS = require('aws-sdk');

// Create DynamoDB document client
exports.handler = async (event, context) => {
var awsddbdc = new AWS.DynamoDB.DocumentClient({apiVersion: '2012-08-10'});

//Parse the incoming JSON values
const {id,size,topping} = JSON.parse(event.body);

//Query Parameters
var params = {
        TableName : 'Pizza',
        Item : {
                id: id,
                size: size,
                topping: topping
                //id: '5', size: 'medium', topping: 'green peppers'
        }
};

const data = await awsddbdc.put(params).promise();
const response = {
        statusCode: '201',
        body: JSON.stringify(data.Item)
}

return response;

};

5. and 6. REPEAT THE PROCESS DID BEFORE FOR ITEMS 3. AND 4.

Microservices are many API's(a collection of services) inside just one APP.

A "Mashup" is an API that calls many API's.

XML and JSON hold data that can be sent to and also come from the API.